<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Komorebi Sample</title>
  <link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="utf-8">
  <script src="simplex-noise.js"></script>
</head>
<body>
  <div class="img-komorebi img-komorebi-1"></div>
  <div class="img-komorebi img-komorebi-2"></div>
  <div class="img-komorebi img-komorebi-3"></div>
  <script>
    let simplex = new SimplexNoise();
    // let arr = [0.98,0.83,0.96,0.97,0.81,0.88,0.9,0.92,0.94,0.85,0.87,0.89,0.94,0.96,0.98,0.93,0.9,0.88,0.89,0.87,0.81,0.94,0.89,0.85,0.8,0.84,0.85,0.95,0.89,0.96,0.81,0.86,0.9,0.92,0.8,0.98,0.89,0.92,0.98,0.96,0.86,0.97,0.81,0.91,0.95,0.97,0.82,0.84,0.81,0.87,0.91,0.93,0.96,0.92,0.82,0.82,0.98,0.85,0.91,0.95,0.86,0.87,0.87,0.83,0.81,0.85,0.98,0.94,0.84,0.87,0.88,0.97,0.82,0.86,0.85,0.83,0.82,0.8,0.98,0.96,0.93,0.85,0.89,0.93,0.94,0.86,0.9,0.98,0.84,0.91,0.83,0.81,0.89,0.84,0.95,0.93,0.87,0.85,0.9,0.92,0.88];
    
    function generateKeyframes(_str) {
      _str += `@keyframes yuragi {
`;
      for(let i = 0; i < 101; ++i) {
        const val  = Math.max(simplex.noise3D(i * 0.05, 0, 1) * .5 + .45, 0).toFixed(2);
        const val2 = (simplex.noise3D(i * 0.05, 0, 2) * 20).toFixed(2);
        const val3 = (simplex.noise3D(i * 0.05, 0, 3) * 20).toFixed(2);
        const num = i * 1;
        let   pct = num.toString() + "%";

        if(num < 10)       pct = `  ${ pct }`;
        else if(num < 100) pct = ` ${ pct }`;

        _str += `  ${ pct } { opacity:${ val }; background-position: ${ val2 }px, ${ val3 }px; }
`;
      }
      _str += "}";
      console.log(_str);
    }

    let str = "";
    generateKeyframes(str);
    console.log(str);
  </script>
</body>
</html>